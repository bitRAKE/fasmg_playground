An open STRUC often presents as "undefined or out of scope" errors.


Technically syntacticals on the left side of /match/ are literal values - they just don't require quotes.



https://board.flatassembler.net/topic.php?p=214249#214249

Proposed change:

	/iterate/ should ignore trailing comma

	iterate A,
	end iterate

	...would not loop with A="". To do that would require:

	iterate A,,
	end iterate

This change would follow list definitions in many other languages and parallels whitespace separated lists - trailing whitespace is not another item.

Present functionality has no way to iterate zero times without additional branching. Copy-Paste of lists always requires post paste editing when trailing item is modified.

/repeat/ instruction already follows a zero based pattern. So, this change would seem to align the functionality across fasmg.

How would it effect existing code? Only the empty case would need to be changed.


Tomasz Grysztar:

"In general, I'm very reluctant to consider any backward-compatibility breaking changes at this point (otherwise I would be attempting changes to what I consider "not the best choices" in some other areas, which I would consider more important - but still not important enough to consider breaking existing source bases now)."

"This specific trait is inherited from fasm 1, where IRP was supposed to behave similarly to a macro with repeated argument - this is why it was chosen that it should behave analogously to such macro and always process at least a single argument, even if empty one. Similarly macros in fasm 1 treat the additional comma at the end always as adding additional empty argument."



